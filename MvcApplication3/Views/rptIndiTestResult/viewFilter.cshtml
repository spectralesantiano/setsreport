@*//////// ---------------- name 'viewFilter.cshtml' is mandatory --------------/// *@
@*//////// ---------------- as well as _DocumentViewer1Partial.cshtml --------------/// *@
@*//////// ---------------- and Index.cshtml --------------/// *@

@model MvcApplication3.Models.RankModel
@*@model MvcApplication3.Models.ExamineeRankModel*@

@*@{
    Layout = null;// "~/views/shared/_layout.cshtml";
}*@

<script type="text/javascript" src="/Scripts/jquery-1.7.1.js">      </script>

Individual test result filter
<fieldset>  
        <legend>Calculate Simple Interest</legend>  

       @* ///// need to go back to index method..Page to call a report that must not be a partialview page. Like this page.
       ////// The sent button must be hide or do not add. Because theres already a generic button on the print selection(reportmain/index.cshtml) *@
       @* @using (Ajax.BeginForm("Index", "rptIndiTestResult", null,
                            new AjaxOptions { UpdateTargetId = "divInterestDeatils" }, new { id = "rptIndiTestResult" }))*@
      @using (Ajax.BeginForm("DocumentViewerPartial", "rptIndiTestResult", null,
                            new AjaxOptions { UpdateTargetId = "divInterestDeatils" }, new { id = "rptIndiTestResult" }))
      {  
        <div id="divInterestDeatils"></div>  
        <ol>  
            <li>
            <div>
                   @Html.DropDownListFor(r => r.PositionID, ViewBag.RankList as SelectList, new { id = "ranklist"})  
                 
            </div>
                        
            </li>
            <li>  
                @Html.Label("Amount")  
                @Html.TextBox("txtAmount")  
            </li>  
              
               <div>
                  @Html.DropDownList("SubjCategoryID", ViewBag.SubjectCat as SelectList,new { id = "subjectcat" })
                   
               </div> 
              
             <li>  
               <div>
                 @* @Html.DropDownList("SubjectID", ViewBag.SubjectList as SelectList, new { id = "subjects" })*@
                    @Html.DropDownList("SubjectID", Enumerable.Empty<SelectListItem>(), new { id = "subjects", style = "min-width: 250px;" })
               </div> 
            </li>  
        </ol>  
          
          @* ///---- this div is required ------////*@
          <div id = "selectlist">
                @* ///---- the SelectionList.cshtml will appear here ------////*@
                @* @Html.Partial("~/Views/ReportMain/SelectionList.cshtml")*@
                @*@Html.Action("SelectionList", "rptIndiTestResult");*@
          </div>
          
          @* ////---- this div is required ----------/////*@
          <div>
             @* ////---- 'txtselected' name is required ----------/////*@
             @Html.Hidden("txtselected", "", new { id = "txtselected" })  
          </div>
          
    @*<button id = "btncalc">Calculate</button>  *@
      }     
   @*   <button id = "btnselected">selected</button>  *@
</fieldset>  

<script type ="text/javascript">


//    $("#subjectcat").change(function () {
//        var ss = this.value;
//        alert(ss);

//        $("#subjects").empty();
//        alert("test");

//        $.getJSON("/rptIndiTestResult/GetSubjects?SubjCategoryID='" + ss + "'", null, function (data) {
//            $("#subjects").addItems(data);
//        });

    $("#subjectcat").change(function () {
        var ss = this.value;
        $.ajax({
            type: "POST",
            url: "/rptIndiTestResult/GetSubjects?SubjCategoryID='" + ss + "'",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                var lstsubjects = $("[id*=subjects]");
                lstsubjects.empty();
                //                    $.each(r.d, function () {
                //                        lstCustomers.append($("<option></option>").val(this['Value']).html(this['Text']));
                //                    });
                $.each(r, function (index, itemData) {
                    //alert(itemData.Text);                    
                    var option = new Option(itemData.Text, itemData.Value);
                    //lstsubjects.add(option);
                    $("#subjects").append(option);
                });
            }
        });
    });
    

    $.fn.addItems = function (data) {
        return this.each(function () {
            var list = this;
            $.each(data, function (index, itemData) {
                alert(itemData);
                var option = new Option(itemData.Text, itemData.Value);
                list.add(option);
            });
        });
    };

    /// --- this is where you filter what will be displayed in selection list--- ////
    $("#ranklist").change(function () {
        var ss = this.value;
        //alert(ss);
        $("#selectlist").load("/rptIndiTestResult/SelectionList?rankid='" + ss + "'")
    });




//    $("#btnselected").click(function () {
//        //alert("selected");
//        var s = $("#lstselect option:selected").val();
//        //alert(s);
//        var table = s.split(',');
//        //alert(table[0]);

//        for (i = 0; i < table.length; i++) {
//            alert(table[i]);
//        }
//    });

//    $("#btnselected").click(function () {
//        var rr = [];
//        $("#lstselect :selected").each(function (i, selected) {
//            rr[i] = "'" + $(selected).val() + "'";
//        });
//        //alert(rr);
//        //alert(rr[0]);
//        var s = rr.toString();
//        alert(s);

//    });
 
</script>


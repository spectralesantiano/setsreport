@{
    Layout = null;
}

<script type="text/javascript" src="/Scripts/jquery-1.7.1.js">      </script>
<script type="text/javascript" src="/Scripts/bootstrap.js">      </script>
<script type="text/javascript" src="/Scripts/bootstrap-datepicker.js">      </script>
<script type="text/javascript" src="/Scripts/bootstrap-datepicker.min.js">      </script>

<h4 style="font:arial" class="FIlterHeader">Average Scoring - Average Scoring</h4>  

<fieldset>  

      
      @{string rptname = "rptAvgScoringPerNat";}
      
      @using (Ajax.BeginForm("DocumentViewerPartial", rptname, null,
                            null, new { id = rptname }))
      {
      
            <table class="table">
                <tr style="padding:5px">
                    <td style = "padding-right:8px ; vertical-align:top">                         <!-- criteria -->

                        <div> 
                            <table>
                                <tr><th style ="border-bottom:1px solid black">Criteria</th></tr>
                                <tr><td style="padding-left:8px">
                                    <table>
                                        <tr><td>Taken at:</td>
                                            <td>
                                                <div class="input-append">
                                                 @Html.DropDownList("CompanyName", ViewBag.CompanyName as SelectList,  new { id = "lueCompany" })    
                                                </div>
                                            </td>
                                        </tr>
                                         <tr><td>Nationality:</td>
                                            <td>
                                                <div class="input-append">
                                                  @Html.DropDownList("lueNat", ViewBag.Nationality as SelectList, new { id = "lueNat", @size = "8", @multiple = "multiple", @class = "Listbox" })
                                                  <button id = "clearlueNat" type ="button" class="btn">x</button>    
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </td></tr>
                            </table>
                        </div>

                    </td>
                    <td style="vertical-align:top">                            <!-- sorting -->
                        <table>
                            <tr><th  style ="border-bottom:1px solid black">Sorting</th></tr>
                            <tr>
                                <td style="padding-left:8px">
                                    <table>
                                        <tr><th colspan="2">Report Sorting</th></tr>
                                        <tr><td>Sort by:</td>
                                            <td>
                                                <div class="input-append">
                                                 @Html.DropDownList("SortReportBy", ViewBag.SortReportBy as SelectList, new { id = "lueSortReportBy" })    
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td> 
                                                <label>
                                                    @Html.RadioButton("rgSortReportOrder", "Asc", true)
                                                    Ascending
                                                </label>
                                            </td>
                                            <td>  
                                                <label>@Html.RadioButton("rgSortReportOrder", "Desc")
                                                    Descending
                                                </label>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-left:8px">
                                    <table>
                                          <tr><th>Selection Sorting</th></tr>
                                          <tr>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td> 
                                                          <label>@Html.RadioButton("rgSortOrder", "Asc", true)
                                                                  Ascending 
                                                           </label>
                                                        </td>
                                                        <td>
                                                            <label>
                                                                @Html.RadioButton("rgSortOrder", "Desc")
                                                                Descending
                                                            </label>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            
                                          </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                @*<tr><td><br /></td></tr>*@
                <tr>
                    <td colspan ="4" align ="center"><button id = "btnFilter" type ="button" class="btn btn-small">Apply Selection Sort</button>  </td>
                </tr>
            </table>
          
           <div>
                @* ////---- 'txtselected' name is required ----------/////*@
                @Html.Hidden("txtselected", "", new { id = "txtselected" })  
          </div>
      }
      </fieldset>


<script type="text/javascript">

    var rpt = 'rptAvgScoringPerNat';

    $("#btnFilter").click(
        function () {
            //        var ss = $("#testname option:selected").val();

            var dict = new Object();

            dict["CompanyName"] = $("#lueCompany").val();
            //dict["CompanyName"] = $("#lueSignatory").val();

            // --- required ---//
            $("#SelectionView").load("/" + rpt + "/SelectionList?criteria=" + encodeURIComponent(JSON.stringify(dict)) + "&sortbyname=" + $("#cbeSortBy").val() + "&sortby=" + $("[name='rgSortOrder']:checked").val())

        }
    )

    $("#clearlueNat").click(
        function () {
            //            alert($("#lueTestName option:selected").val());
            $("#lueNat").val("");
            //            $("#lueTestName option:selected").removeAttr('selected');
        }
    )

        
</script>